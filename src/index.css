/* src/index.css */
@import "tailwindcss";

/* =========================================================================
   THEME TOKENS (@layer base)
   Define all your CSS variables here for each theme.
========================================================================= */
@layer base {
  /* Default fallback (gold theme) - used if no data-theme is explicitly set */
  :root {
    --primary: #C0843D;
    --primary-600: #9A6A30;
    --primary-700: #7A5526;

    --bg: #F8F5F2;          /* App background */
    --card: #FFFFFF;        /* Card/panel background */
    --text: #2D2D2D;        /* Main text color */
    --muted: #7C7C7C;       /* Muted/secondary text color */

    --sidebar-bg: #FFFFFF;  /* Sidebar background */
    --sidebar-text: #2D2D2D;/* Sidebar text */

    --table-head: #3F3F46;  /* Table header background */
    --table-head-text: #FFFFFF; /* Table header text */

    --row-hover: rgba(192, 132, 61, 0.12); /* Hover/soft highlight background */

    --success: #22C55E;     /* Success color */
    --danger: #DC2626;      /* Danger color */
    --danger-700: #B91C1C;  /* Darker danger for hover states */

    --border: rgba(10, 20, 30, 0.08); /* General border color */

    /* Navigation specific colors (for active/hover states) */
    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  /* Existing Themes */
  :root[data-theme="gold"] {
    --primary: #C0843D;
    --primary-600: #9A6A30;
    --primary-700: #7A5526;

    --bg: #F8F5F2;
    --card: #FFFFFF;
    --text: #2D2D2D;
    --muted: #7C7C7C;

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #2D2D2D;

    --table-head: #3F3F46;
    --table-head-text: #FFFFFF;

    --row-hover: rgba(192, 132, 61, 0.12);

    --success: #22C55E;
    --danger: #DC2626;
    --danger-700: #B91C1C;

    --border: rgba(10, 20, 30, 0.08);

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="amber"] {
    --primary: #E9A23B;
    --primary-600: #CC8A2E;
    --primary-700: #A56D23;

    --bg: #F5F7FA;
    --card: #FFFFFF;
    --text: #1E293B;
    --muted: #64748B;

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #1E293B;

    --table-head: #1E293B;
    --table-head-text: #FFFFFF;

    --row-hover: rgba(233, 162, 59, 0.10);

    --success: #10B981;
    --danger: #EF4444;
    --danger-700: #DC2626;

    --border: rgba(10, 20, 30, 0.08);

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="yellow"] {
    --primary: #FBBF24;
    --primary-600: #F59E0B;
    --primary-700: #D97706;

    --bg: #FFFDF7;
    --card: #FFFFFF;
    --text: #1F2937;
    --muted: #6B7280;

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #1F2937;

    --table-head: #111827;
    --table-head-text: #FFFFFF;

    --row-hover: rgba(251, 191, 36, 0.12);

    --success: #22C55E;
    --danger: #DC2626;
    --danger-700: #B91C1C;

    --border: rgba(10, 20, 30, 0.08);

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="dark"] {
    --bg: #0b1220;
    --card: #0f172a;
    --text: #e6eef8;
    --muted: #9aa6bb;

    --sidebar-bg: #020617; /* Dark sidebar */
    --sidebar-text: #e5e7eb; /* Light text for dark sidebar */

    --primary: #60a5fa;
    --primary-600: #3b82f6;
    --primary-700: #1d4ed8;

    --success: #34d399;
    --danger: #f87171;
    --danger-700: #ef4444;

    --table-head: var(--primary); /* Table header using primary color */
    --table-head-text: #071025; /* Dark text for primary table header */

    --row-hover: rgba(96, 165, 250, 0.10);

    --border: rgba(255, 255, 255, 0.10);

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="corporate"] {
    --primary: #3B82F6;     /* blue-500 */
    --primary-600: #2563EB; /* blue-600 */
    --primary-700: #1D4ED8; /* blue-700 */

    --bg: #F9FAFB;          /* gray-50 */
    --card: #FFFFFF;
    --text: #1F2937;        /* gray-800 */
    --muted: #6B7280;       /* gray-500 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #1F2937;

    --table-head: #374151;  /* gray-700 */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(59, 130, 246, 0.08); /* blue-500 tint */

    --success: #10B981;     /* emerald-500 */
    --danger: #EF4444;      /* red-500 */
    --danger-700: #DC2626;  /* red-600 */

    --border: rgba(107, 114, 128, 0.2); /* gray-400 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="forest"] {
    --primary: #059669;     /* emerald-600 */
    --primary-600: #047857; /* emerald-700 */
    --primary-700: #065F46; /* emerald-800 */

    --bg: #F0FDF4;          /* green-50 */
    --card: #FFFFFF;
    --text: #166534;        /* green-800 */
    --muted: #4ADE80;       /* green-400 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #166534;

    --table-head: #166534;  /* green-800 */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(5, 150, 105, 0.1); /* emerald-600 tint */

    --success: #10B981;     /* emerald-500 */
    --danger: #EF4444;      /* red-500 */
    --danger-700: #DC2626;  /* red-600 */

    --border: rgba(22, 101, 52, 0.2); /* green-800 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  :root[data-theme="violet"] {
    --primary: #8B5CF6;     /* violet-500 */
    --primary-600: #7C3AED; /* violet-600 */
    --primary-700: #6D28D9; /* violet-700 */

    --bg: #F5F3FF;          /* violet-50 */
    --card: #FFFFFF;
    --text: #4C1D95;        /* violet-900 */
    --muted: #A78BFA;       /* violet-400 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #4C1D95;

    --table-head: #6D28D9;  /* violet-700 */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(139, 92, 246, 0.1); /* violet-500 tint */

    --success: #10B981;     /* emerald-500 */
    --danger: #EF4444;      /* red-500 */
    --danger-700: #DC2626;  /* red-600 */

    --border: rgba(76, 29, 149, 0.2); /* violet-900 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  /* New Theme: Modern Gray */
  :root[data-theme="modern"] {
    --primary: #4A5568;     /* gray-700 */
    --primary-600: #2D3748; /* gray-800 */
    --primary-700: #1A202C; /* gray-900 */

    --bg: #F7FAFC;          /* gray-100 */
    --card: #FFFFFF;
    --text: #2D3748;        /* gray-800 */
    --muted: #A0AEC0;       /* gray-400 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #2D3748;

    --table-head: #4A5568;  /* gray-700 */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(74, 85, 104, 0.08); /* gray-700 tint */

    --success: #38A169;     /* green-600 */
    --danger: #E53E3E;      /* red-600 */
    --danger-700: #C53030;  /* red-700 */

    --border: rgba(160, 174, 192, 0.3); /* gray-400 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  /* New Theme: Ocean Breeze */
  :root[data-theme="ocean"] {
    --primary: #06B6D4;     /* cyan-500 */
    --primary-600: #0891B2; /* cyan-600 */
    --primary-700: #0E7490; /* cyan-700 */

    --bg: #F0F9FF;          /* blue-50 */
    --card: #FFFFFF;
    --text: #0F172A;        /* slate-900 */
    --muted: #64748B;       /* slate-500 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #0F172A;

    --table-head: #1A202C;  /* gray-900 */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(6, 182, 212, 0.1); /* cyan-500 tint */

    --success: #10B981;     /* emerald-500 */
    --danger: #EF4444;      /* red-500 */
    --danger-700: #DC2626;  /* red-600 */

    --border: rgba(148, 163, 184, 0.3); /* slate-400 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }

  /* New Theme: Regal Purple */
  :root[data-theme="regal"] {
    --primary: #9333EA;     /* purple-600 */
    --primary-600: #7C2DED; /* purple-700 */
    --primary-700: #6B21A8; /* purple-800 */

    --bg: #FAFAF9;          /* stone-50 */
    --card: #FFFFFF;
    --text: #290E47;        /* Custom dark purple */
    --muted: #A8A29E;       /* stone-400 */

    --sidebar-bg: #FFFFFF;
    --sidebar-text: #290E47;

    --table-head: #290E47;  /* Custom dark purple */
    --table-head-text: #FFFFFF;

    --row-hover: rgba(147, 51, 234, 0.12); /* purple-600 tint */

    --success: #10B981;     /* emerald-500 */
    --danger: #EF4444;      /* red-500 */
    --danger-700: #DC2626;  /* red-600 */

    --border: rgba(120, 113, 108, 0.3); /* stone-500 tint */

    --nav-hover-bg: var(--row-hover);
    --nav-active-bg: var(--primary-600);
    --nav-active-text: #ffffff;
  }
}

/* =========================================================================
   YOUR APP CUSTOM UTILITIES (@layer utilities)
   These map your custom class names or override Tailwind defaults
   to use theme variables.
========================================================================= */
@layer utilities {
  /* Core app backgrounds and text colors */
  .bg-app { background: var(--bg) !important; }
  .bg-card { background: var(--card) !important; color: var(--text) !important; }
  .bg-sidebar { background: var(--sidebar-bg) !important; color: var(--sidebar-text) !important; }

  .text-main { color: var(--text) !important; }
  .text-muted { color: var(--muted) !important; }

  /* Borders and dividers */
  .border-theme { border-color: var(--border) !important; }
  .border-app { border-color: var(--border) !important; } /* Alias for border-theme */
  .divide-theme { --tw-divide-color: var(--border) !important; }

  /* Primary color usage */
  .bg-primary { background: var(--primary) !important; color: #fff !important; }
  .bg-primary-600 { background: var(--primary-600) !important; color: #fff !important; }
  .bg-primary-700 { background: var(--primary-700) !important; color: #fff !important; }
  .text-primary { color: var(--primary) !important; }
  .text-primary-700 { color: var(--primary-700) !important; }

  /* Danger button (uses specific danger-700 for hover) */
  .btn-danger { background: var(--danger) !important; color: #fff !important; }
  .btn-danger:hover { background: var(--danger-700) !important; }

  /* Table header and row hover */
  .table-head { background: var(--table-head) !important; color: var(--table-head-text) !important; }
  .row-hover:hover { background: var(--row-hover) !important; }

  /* Focus ring/border utilities (to use theme primary) */
  .border-primary { border-color: var(--primary) !important; }
  .ring-primary { --tw-ring-color: var(--primary) !important; }
  .focus\:ring-primary:focus { --tw-ring-color: var(--primary) !important; }
  .focus\:border-primary:focus { border-color: var(--primary) !important; }

  /* Dynamic hover/active states for custom variables */
  .hover\:bg-row-hover:hover { background: var(--row-hover) !important; }
  .hover\:bg-primary-600:hover { background: var(--primary-600) !important; }
  .hover\:border-theme:hover { border-color: var(--primary-600) !important; } /* e.g., for forms */
  .hover\:text-primary-700:hover { color: var(--primary-700) !important; }

  /* Tailwind-like fractional opacities for custom vars */
  .bg-card\/20 { background: color-mix(in srgb, var(--card) 20%, transparent) !important; }
  .bg-card\/80 { background: color-mix(in srgb, var(--card) 80%, transparent) !important; }
  .hover\:bg-card\/20:hover { background: color-mix(in srgb, var(--card) 20%, transparent) !important; }
  .bg-primary\/10 { background: color-mix(in srgb, var(--primary) 10%, transparent) !important; }
  .hover\:bg-primary\/10:hover { background: color-mix(in srgb, var(--primary) 10%, transparent) !important; }

  /* Placeholder color */
  .placeholder-card::placeholder { color: var(--muted) !important; }

  /* Retain your custom shadow-sm override */
  .shadow-sm { box-shadow: 0 6px 18px rgba(8,15,25,0.03); }

  /* =========================================================================
     CRUCIAL: Global Overrides for common Tailwind Neutral/Semantic Colors
     This maps standard Tailwind neutrals to your theme variables,
     so you don't need to change every bg-white to bg-card in your JSX.
  ========================================================================= */
  .bg-white { background: var(--card) !important; }
  .bg-gray-50, .bg-slate-50, .bg-stone-50, .bg-green-50, .bg-violet-50, .bg-blue-50 { background: var(--bg) !important; }
  .bg-gray-100, .bg-slate-100, .bg-stone-100, .bg-green-100, .bg-violet-100, .bg-blue-100 { background: color-mix(in srgb, var(--text) 6%, transparent) !important; }
  /* Specific mapping for common semantic colors to use theme vars */
  .bg-emerald-50 { background: color-mix(in srgb, var(--success) 14%, transparent) !important; }
  .bg-amber-50 { background: color-mix(in srgb, var(--primary) 14%, transparent) !important; }
  .bg-red-50 { background: color-mix(in srgb, var(--danger) 14%, transparent) !important; }


  .border-gray-200, .border-slate-200, .border-slate-100, .border-stone-200,
  .border-blue-100, .border-emerald-100, .border-amber-100, .border-red-200, .border-green-200, .border-violet-100 { /* Catch all border neutrals */
    border-color: var(--border) !important;
  }

  .text-gray-500, .text-gray-600, .text-slate-600, .text-stone-500 { color: var(--muted) !important; }
  .text-gray-700, .text-gray-800, .text-gray-900, .text-slate-900, .text-stone-900, .text-green-800, .text-violet-900 { color: var(--text) !important; }
  .text-emerald-600 { color: var(--success) !important; }
  .text-amber-600 { color: var(--primary) !important; }
  .text-red-600 { color: var(--danger) !important; }

  .hover\:bg-gray-50:hover, .hover\:bg-slate-50:hover, .hover\:bg-stone-50:hover,
  .hover\:bg-gray-100:hover, .hover\:bg-slate-100:hover, .hover\:bg-blue-50:hover {
    background: var(--row-hover) !important;
  }

  /* Specific override for loading spinner border (if still using border-indigo-600) */
  .border-indigo-600 { border-color: var(--primary) !important; }

  /* For your modal's fixed border values (e.g., border-[#e5e7eb]) */
  .border-\[\#e5e7eb\] { border-color: var(--border) !important; }
  /* dark:border-[#1e293b] will now be handled by Tailwind with darkMode: ['class', '[data-theme="dark"]'] config */
}

/* =========================================================================
   COMPONENT SPECIFIC STYLES (@layer components)
   These are for specific component classes that you define.
========================================================================= */
@layer components {
  /* Sidebar nav-link styling */
  .nav-link {
    color: inherit; /* Inherit color from parent (bg-sidebar) */
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 0.75rem; /* py-2.5 px-3 */
    border-radius: 0.75rem;    /* rounded-2xl */
    transition: background-color .2s, color .15s, transform .15s;
    position: relative; /* Essential for tooltips/absolute children */
  }

  .nav-icon,
  .nav-text {
    color: inherit; /* Inherit from .nav-link */
    transition: color .15s, transform .15s;
  }

  /* Hover state for nav links */
  .nav-link:hover { background-color: var(--nav-hover-bg); }
  .nav-link:hover .nav-icon,
  .nav-link:hover .nav-text { color: var(--primary) !important; }

  /* Active state for nav links */
  .nav-link.active {
    background: var(--nav-active-bg);
    color: var(--nav-active-text);
  }
  .nav-link.active .nav-icon,
  .nav-link.active .nav-text {
    color: inherit !important;
  }

  /* focus-ring class used in your forms */
  .focus-ring:focus {
    outline: 2px solid transparent;
    box-shadow: 0 0 0 3px var(--row-hover); /* Uses theme-based subtle shadow */
    border-radius: 6px;
  }

  /* Generic Badge (for StatusBadge component) */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px; /* Pill shape */
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid var(--border); /* Default badge border */
  }

  /* StatusBadge color variations - uses color-mix for subtle tints */
  .badge-success {
    background: color-mix(in srgb, var(--success) 14%, transparent);
    color: var(--success);
    border-color: color-mix(in srgb, var(--success) 30%, transparent);
  }
  .badge-danger {
    background: color-mix(in srgb, var(--danger) 14%, transparent);
    color: var(--danger);
    border-color: color-mix(in srgb, var(--danger) 30%, transparent);
  }
  .badge-info { /* Used for 'new' / 'pending' states */
    background: color-mix(in srgb, var(--primary) 14%, transparent);
    color: var(--primary);
    border-color: color-mix(in srgb, var(--primary) 30%, transparent);
  }
  .badge-default { /* For generic / inactive states */
    background: color-mix(in srgb, var(--text) 6%, transparent);
    color: var(--muted);
    border-color: var(--border);
  }

  /* Checkbox styling for theme compatibility (if using custom checkbox) */
  .app-checkbox-box {
    width: 1.25rem;
    height: 1.25rem;
    border: 2px solid var(--border);
    border-radius: 0.375rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color .15s, border-color .15s;
    background: transparent;
  }
  .app-checkbox-input:checked + .app-checkbox-box {
    background: var(--primary);
    border-color: var(--primary);
  }
  .app-checkbox-check { opacity: 0; transition: opacity .15s; }
  .app-checkbox-input:checked + .app-checkbox-box .app-checkbox-check { opacity: 1; }

  /* Modal backdrop for blur effect */
  .backdrop { backdrop-filter: blur(6px); }
}